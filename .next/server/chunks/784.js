"use strict";exports.id=784,exports.ids=[784],exports.modules={8878:(e,t,a)=>{a.r(t),a.d(t,{"001cc4acfe45b10d58713b1c460e4395cf47603cb8":()=>s.x});var s=a(31347)},22631:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(13072);let r=s.forwardRef(function({title:e,titleId:t,...a},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))})},23864:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(45781);a(13072);let r=({label:e,name:t,defaultValue:a,placeholder:r,errors:i=[]})=>{let n=`${t}-error`;return(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:t,className:"mb-2 block text-sm font-medium",children:e}),(0,s.jsx)("div",{className:"relative mt-2 rounded-md",children:(0,s.jsx)("input",{id:t,name:t,type:"text",defaultValue:a,placeholder:r,className:"peer block w-full rounded-md border border-gray-200 py-2 pl-3 text-sm outline-2 placeholder:text-gray-500","aria-describedby":n})}),i.length>0&&(0,s.jsx)("div",{id:n,"aria-live":"polite","aria-atomic":"true",children:i.map(e=>(0,s.jsx)("p",{className:"mt-2 text-sm text-red-500",children:e},e))})]})}},24507:(e,t,a)=>{a.r(t),a.d(t,{"0046916c1c9220a5c5a6a4c0138e5295d247222af5":()=>_,"40ab58083b8d28fb977870989ee376680994ce268e":()=>$,"40b4d45c20a13cf434951303abdcae8088ac65836a":()=>P,"603f05218b3cc9c9f41a4d4d3cc757e9c8db8149ef":()=>j,"609b99f3e19b0427ce04bee13dbf109c7cfb06b1f2":()=>z,"60eefe5687e62cb73254476c618933b2a0b9faef3a":()=>N,"60f7a2d22e03a974bd8f9b136fdf234666ab2a529b":()=>C,"70179a40a758aeafb45e718eeef03c2bd7462da59c":()=>T,"707e07d496f4570ccb1f124c2a8fc835ccb9f32aff":()=>I});var s=a(1829);a(70129);var r=a(22993),i=a(90920),n=a(68938),c=a(38847),l=a(36373),o=a(85134),d=a(68234);async function u(e){let t="testo@teamtesto.com",a=process.env.TEAM_TESTO_ADMIN_PASSWORD,s=a&&""!==a.trim()?a:"teamtesto",r=await d.Ay.hash(s,10);if(e===t)return{id:"admin",name:"TeamTesto",email:t,password:r}}(0,i.A)(process.env.POSTGRES_URL,{ssl:"require"});let{auth:f,signIn:m,signOut:b}=(0,l.Ay)({pages:{signIn:"/login"},callbacks:{authorized({auth:e,request:{nextUrl:t}}){let a=!!e?.user,s=t.pathname,r=s.match(/\.(svg|png|jpg|jpeg|gif|css|js|ico|txt|woff2?|ttf|eot|otf)$/);if(s.startsWith("/_next")||s.startsWith("/favicon")||r)return!0;let i=s.startsWith("/dashboard"),n=s.startsWith("/seed");return i||n?!!a:!a||Response.redirect(new URL("/dashboard",t))}},providers:[],providers:[(0,o.A)({async authorize(e){let t=r.z.object({email:r.z.string().email(),password:r.z.string().min(6)}).safeParse(e);if(t.success){let{email:e,password:a}=t.data,s=await u(e);if(console.log("getAdminUserFromEnv",s),!s)return null;if(await d.Ay.compare(a,s.password))return s}return console.log("Invalid credentials"),null}})]});var h=a(96330);let g=global.prisma||new h.PrismaClient;async function v(e,t,a){return e.testCase.update({where:{id:t},data:{executionStatus:a.toLowerCase()}})}async function p(e){let t=process.env.DEFAULT_EXECUTION_STATUS||"";return e.testCase.updateMany({data:{executionStatus:t.toLowerCase()}})}let x=r.z.object({testSuiteId:r.z.string().optional().nullable(),tcId:r.z.string().min(1,"Test Case ID is required"),name:r.z.string().min(1,"Name is required"),status:r.z.string().min(1,"Status is required"),executionStatus:r.z.string().min(1,"Execution status is required"),meta:r.z.union([r.z.string(),r.z.record(r.z.any())]).optional().transform(e=>{if("string"==typeof e)try{return JSON.parse(e)}catch{return}return e})});var y=a(64297);let w=(0,i.A)(process.env.POSTGRES_URL,{ssl:"require"}),E=r.z.object({id:r.z.string(),customerId:r.z.string({invalid_type_error:"Please select a customer."}),amount:r.z.coerce.number().gt(0,{message:"Please enter an amount greater than $0."}),status:r.z.enum(["pending","paid"],{invalid_type_error:"Please select an invoice status."}),date:r.z.string()}),S=E.omit({id:!0,date:!0}),A=E.omit({date:!0,id:!0});async function j(e,t){let a=S.safeParse({customerId:t.get("customerId"),amount:t.get("amount"),status:t.get("status")});if(!a.success)return{errors:a.error.flatten().fieldErrors,message:"Missing Fields. Failed to Create Invoice."};let{customerId:s,amount:r,status:i}=a.data,l=new Date().toISOString().split("T")[0];try{await w`
            INSERT INTO invoices (customer_id, amount, status, date)
            VALUES (${s}, ${100*r}, ${i}, ${l})
        `}catch(e){return console.log(e),{message:"Database Error: Failed to Create Invoice."}}(0,n.revalidatePath)("/dashboard/invoices"),(0,c.redirect)("/dashboard/invoices")}async function I(e,t,a){let s=A.safeParse({customerId:a.get("customerId"),amount:a.get("amount"),status:a.get("status")});if(!s.success)return{errors:s.error.flatten().fieldErrors,message:"Missing Fields. Failed to Update Invoice."};let{customerId:r,amount:i,status:l}=s.data;try{await w`
            UPDATE invoices
            SET customer_id = ${r},
                amount      = ${100*i},
                status      = ${l}
            WHERE id = ${e}
        `}catch(e){return console.log(e),{message:"Database Error: Failed to Update Invoice."}}(0,n.revalidatePath)("/dashboard/invoices"),(0,c.redirect)("/dashboard/invoices")}async function P(e){await w`DELETE
              FROM invoices
              WHERE id = ${e}`,(0,n.revalidatePath)("/dashboard/invoices")}async function N(e,t){try{await m("credentials",t)}catch(e){if(e instanceof l.lR){if(e instanceof l.xz)return"Invalid credentials.";return"Something went wrong."}throw e}}async function z(e,t){let a=x.safeParse({testSuiteId:t.get("testSuiteId")?.toString()||null,tcId:t.get("tcId"),name:t.get("name"),status:t.get("status"),executionStatus:t.get("executionStatus"),meta:t.get("meta")});if(!a.success)return{errors:a.error.flatten().fieldErrors,message:"Validation failed. Please correct the fields."};let{testSuiteId:s,tcId:r,name:i,status:l,executionStatus:o,meta:d}=a.data;try{await g.testCase.create({data:{testSuiteId:s,tcId:r,name:i,status:l,executionStatus:o,meta:d}})}catch(e){return console.error("Prisma Error:",e),{message:"Database Error: Failed to create test case."}}(0,n.revalidatePath)("/dashboard/test-cases"),(0,c.redirect)("/dashboard/test-cases")}async function T(e,t,a){let s=x.safeParse({testSuiteId:a.get("testSuiteId")?.toString()||null,tcId:a.get("tcId"),name:a.get("name"),status:a.get("status")??"draft",executionStatus:a.get("executionStatus"),meta:a.get("meta")??{}});if(!s.success)return{errors:s.error.flatten().fieldErrors,message:"Validation failed. Please correct the fields."};let{testSuiteId:r,tcId:i,name:l,status:o,executionStatus:d,meta:u}=s.data;try{await g.testCase.update({where:{id:e},data:{testSuiteId:r,tcId:i,name:l,status:o,executionStatus:d,meta:u}})}catch(e){return console.error("Prisma Error:",e),{message:"Database Error: Failed to update test case."}}(0,n.revalidatePath)("/dashboard/test-cases"),(0,c.redirect)("/dashboard/test-cases")}async function $(e){await g.testCase.delete({where:{id:e}}),(0,n.revalidatePath)("/dashboard/testcases")}async function _(){await p(g),(0,n.revalidatePath)("/dashboard/testcases")}async function C(e,t){await v(g,e,t),(0,n.revalidatePath)(`/dashboard/testcases/${e}`)}(0,y.D)([j,I,P,N,z,T,$,_,C]),(0,s.A)(j,"603f05218b3cc9c9f41a4d4d3cc757e9c8db8149ef",null),(0,s.A)(I,"707e07d496f4570ccb1f124c2a8fc835ccb9f32aff",null),(0,s.A)(P,"40b4d45c20a13cf434951303abdcae8088ac65836a",null),(0,s.A)(N,"60eefe5687e62cb73254476c618933b2a0b9faef3a",null),(0,s.A)(z,"609b99f3e19b0427ce04bee13dbf109c7cfb06b1f2",null),(0,s.A)(T,"70179a40a758aeafb45e718eeef03c2bd7462da59c",null),(0,s.A)($,"40ab58083b8d28fb977870989ee376680994ce268e",null),(0,s.A)(_,"0046916c1c9220a5c5a6a4c0138e5295d247222af5",null),(0,s.A)(C,"60f7a2d22e03a974bd8f9b136fdf234666ab2a529b",null)},31201:(e,t,a)=>{a.d(t,{$:()=>i});var s=a(45781),r=a(42366);function i({children:e,className:t,...a}){return(0,s.jsx)("button",{...a,className:(0,r.A)("flex h-10 items-center rounded-lg bg-black hover:bg-gray-700 px-4 text-sm font-medium text-white transition-colors  focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500 active:bg-blue-600 aria-disabled:cursor-not-allowed aria-disabled:opacity-50",t),children:e})}},50061:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(45781);a(13072);let r=({label:e,name:t,defaultValue:a,placeholder:r="Select an option",options:i,errors:n=[],icon:c})=>{let l=`${t}-error`;return(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:t,className:"mb-2 block text-sm font-medium",children:e}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("select",{id:t,name:t,defaultValue:a,className:"peer block w-full cursor-pointer rounded-md border border-gray-200 py-2 pl-10 text-sm outline-2 placeholder:text-gray-500","aria-describedby":l,children:[(0,s.jsx)("option",{value:"",disabled:!0,children:r}),i.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))]}),c&&(0,s.jsx)("span",{className:"pointer-events-none absolute left-3 top-1/2 h-[18px] w-[18px] -translate-y-1/2 text-gray-500",children:c})]}),n.length>0&&(0,s.jsx)("div",{id:l,"aria-live":"polite","aria-atomic":"true",children:n.map(e=>(0,s.jsx)("p",{className:"mt-2 text-sm text-red-500",children:e},e))})]})}},63216:(e,t,a)=>{a.d(t,{A:()=>o});var s=a(95479),r=a(56576),i=a(87846),n=a.n(i),c=a(4034),l=a.n(c);function o({breadcrumbs:e}){return(0,s.jsx)("nav",{"aria-label":"Breadcrumb",className:"mb-6 block",children:(0,s.jsx)("ol",{className:(0,r.$)(l().className,"flex text-xl md:text-2xl"),children:e.map((t,a)=>(0,s.jsxs)("li",{"aria-current":t.active,className:(0,r.$)(t.active?"text-gray-900":"text-gray-500"),children:[(0,s.jsx)(n(),{href:t.href,children:t.label}),a<e.length-1?(0,s.jsx)("span",{className:"mx-3 inline-block",children:"/"}):null]},t.href))})})}}};