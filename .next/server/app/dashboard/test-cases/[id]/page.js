(()=>{var e={};e.id=236,e.ids=[236],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},24270:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f,generateMetadata:()=>m});var a=s(95479),r=s(61618),n=s(83114),i=s(80979);function o({testCase:e}){var t;let s=(t=e.meta)&&"object"==typeof t&&"testSteps"in t&&t.testSteps||[];return(0,a.jsx)("div",{className:"min-h-screen",children:(0,a.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(c,{value:(0,a.jsx)(d,{status:e.executionStatus})})}),s.length>0&&(0,a.jsxs)("div",{className:"mt-12",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:" Test Steps"}),(0,a.jsx)("div",{className:"space-y-5",children:s.map((e,t)=>(0,a.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-5 hover:bg-gray-100 transition",children:[(0,a.jsxs)("p",{className:"text-lg font-semibold text-gray-900 mb-1",children:["Step ",e.stepNumber,": ",e.name]}),e.testData&&(0,a.jsxs)("p",{className:"text-sm text-gray-700 mt-1",children:[(0,a.jsx)("span",{className:"font-medium",children:"Test Data:"})," ",(0,a.jsx)("code",{className:"bg-gray-200 px-2 py-0.5 rounded text-gray-800 text-sm",children:JSON.stringify(e.testData)})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-700 mt-1",children:[(0,a.jsx)("span",{className:"font-medium",children:"Expected Output:"})," ",e.expectedOutput]})]},t))})]}),(0,a.jsx)(n.default,{testCaseId:e.id,currentStatus:e.executionStatus,executionStatusOptions:(0,i.ky)()})]})})}function c({value:e}){return(0,a.jsxs)("div",{children:[" ",(0,a.jsx)("p",{className:"text-base font-medium text-gray-800",children:e})]})}function d({status:e}){let t={passed:"bg-green-200 text-green-700",failed:"bg-red-200 text-red-700",blocked:"bg-orange-200 text-yellow-700",skipped:"bg-gray-200 text-gray-700",default:"bg-blue-100 text-blue-700"},s=t[e]||t.default;return(0,a.jsx)("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${s}`,children:e})}var l=s(74108),u=s(47132);async function m(e){let t=(await e.params).id,s=await (0,u.xN)(Number(t));return s?{title:`${s.name}`,description:"Details of the test case and related steps."}:{title:"Test Case Not Found",description:"This test case does not exist."}}async function f(e){let t=(await e.params).id,s=await (0,u.xN)(Number(t));return s?(0,a.jsxs)("main",{className:"p-10",children:[(0,a.jsx)(l.A,{breadcrumbs:[{label:"Test Cases",href:"/dashboard/test-cases"},{label:`(${s.tcId}) ${s.name}`,href:"/dashboard/test-cases/import",active:!0}]}),(0,a.jsx)(o,{testCase:s})]}):(0,r.notFound)()}},27910:e=>{"use strict";e.exports=require("stream")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},43589:(e,t,s)=>{Promise.resolve().then(s.bind(s,77e3)),Promise.resolve().then(s.t.bind(s,28328,23))},49669:(e,t,s)=>{Promise.resolve().then(s.bind(s,83114)),Promise.resolve().then(s.t.bind(s,87846,23))},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74108:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var a=s(95479),r=s(56576),n=s(87846),i=s.n(n),o=s(4034),c=s.n(o);function d({breadcrumbs:e}){return(0,a.jsx)("nav",{"aria-label":"Breadcrumb",className:"mb-6 block",children:(0,a.jsx)("ol",{className:(0,r.$)(c().className,"flex text-xl md:text-2xl"),children:e.map((t,s)=>(0,a.jsxs)("li",{"aria-current":t.active,className:(0,r.$)(t.active?"text-gray-900":"text-gray-500"),children:[(0,a.jsx)(i(),{href:t.href,children:t.label}),s<e.length-1?(0,a.jsx)("span",{className:"mx-3 inline-block",children:"/"}):null]},t.href))})})}},74998:e=>{"use strict";e.exports=require("perf_hooks")},76566:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>l,routeModule:()=>m,tree:()=>d});var a=s(7025),r=s(18198),n=s(82576),i=s.n(n),o=s(45239),c={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);s.d(t,c);let d={children:["",{children:["dashboard",{children:["test-cases",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,24270)),"/home/runner/work/nextjs-testo/nextjs-testo/app/dashboard/test-cases/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,73249)),"/home/runner/work/nextjs-testo/nextjs-testo/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,59650)),"/home/runner/work/nextjs-testo/nextjs-testo/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,4540,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,53117,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,6874,23)),"next/dist/client/components/unauthorized-error"]}]}.children,l=["/home/runner/work/nextjs-testo/nextjs-testo/app/dashboard/test-cases/[id]/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/dashboard/test-cases/[id]/page",pathname:"/dashboard/test-cases/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},77e3:(e,t,s)=>{"use strict";s.d(t,{default:()=>c});var a=s(45781),r=s(13072),n=s(77001);let i=(0,n.createServerReference)("60f26facb713b86329ba52f466559788eda0694dcb",n.callServer,void 0,n.findSourceMapURL,"updateExecutionStatus");var o=s(7439);function c({testCaseId:e,currentStatus:t,executionStatusOptions:s}){let[n,c]=(0,r.useState)(t),[d,l]=(0,r.useTransition)(),u=(0,o.useRouter)(),m=async t=>{t.preventDefault(),l(async()=>{await i(e,n),u.refresh()})};return(0,a.jsxs)("form",{onSubmit:m,className:"mt-4 space-x-2",children:[(0,a.jsx)("label",{htmlFor:"executionStatus",className:"text-sm font-medium",children:"Update Execution Status:"}),(0,a.jsxs)("select",{name:"executionStatus",id:"executionStatus",defaultValue:n,onChange:e=>c(e.target.value),className:"rounded-md border border-gray-300 p-2 text-sm shadow-sm focus:ring-2 focus:ring-blue-500 focus:outline-none",children:[(0,a.jsx)("option",{value:"",children:"All Statuses"}),s.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsx)("button",{type:"submit",disabled:d,className:"bg-blue-600 text-white text-sm px-3 py-1 rounded disabled:opacity-50",children:d?"Updating...":"Update"})]})}},80432:(e,t,s)=>{"use strict";s.r(t),s.d(t,{"00027631955619476c3ed63818c95c6f8380a267cf":()=>a.x});var a=s(31347)},83114:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});let a=(0,s(51129).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/runner/work/nextjs-testo/nextjs-testo/app/ui/test-cases/execution-status-form.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/runner/work/nextjs-testo/nextjs-testo/app/ui/test-cases/execution-status-form.tsx","default")},91645:e=>{"use strict";e.exports=require("net")},96330:e=>{"use strict";e.exports=require("@prisma/client")},96367:(e,t,s)=>{"use strict";s.r(t),s.d(t,{"00c11f974ed7841b85bdc9c4c0cc0b006a619bae33":()=>q,"402f36ecbf5bed9ef78ecfe082ac1324468e4faca6":()=>I,"40ef6fdc5ab71f4a62a4e2c79135ecedaec44ab323":()=>z,"603b892c1987802fad2b2db79b73c5807c01e5e018":()=>A,"604b4464c12c6c394011553f4987ee0bf75a3d104b":()=>_,"604d28cc5fe65517e1e71479a95ca30d52f62647f2":()=>N,"60f26facb713b86329ba52f466559788eda0694dcb":()=>C,"706b4c5462dd25e3adb21a37880d0b1b17191735e9":()=>T,"70cd218a13bbf7e047941d5eb672e1ea736c393821":()=>E});var a=s(1829);s(70129);var r=s(22993),n=s(90920),i=s(68938),o=s(38847),c=s(36373),d=s(85134),l=s(68234);async function u(e){let t="testo@teamtesto.com",s=process.env.TEAM_TESTO_ADMIN_PASSWORD,a=s&&""!==s.trim()?s:"teamtesto",r=await l.Ay.hash(a,10);if(e===t)return{id:"admin",name:"TeamTesto",email:t,password:r}}(0,n.A)(process.env.POSTGRES_URL,{ssl:"require"});let{auth:m,signIn:f,signOut:p}=(0,c.Ay)({pages:{signIn:"/login"},callbacks:{authorized({auth:e,request:{nextUrl:t}}){let s=!!e?.user,a=t.pathname,r=a.match(/\.(svg|png|jpg|jpeg|gif|css|js|ico|txt|woff2?|ttf|eot|otf)$/);if(a.startsWith("/_next")||a.startsWith("/favicon")||r)return!0;let n=a.startsWith("/dashboard"),i=a.startsWith("/seed");return n||i?!!s:!s||Response.redirect(new URL("/dashboard",t))}},providers:[],providers:[(0,d.A)({async authorize(e){let t=r.z.object({email:r.z.string().email(),password:r.z.string().min(6)}).safeParse(e);if(t.success){let{email:e,password:s}=t.data,a=await u(e);if(!a)return null;if(await l.Ay.compare(s,a.password))return a}return console.log("Invalid credentials"),null}})]});var b=s(96330);let x=global.prisma||new b.PrismaClient;async function h(e,t,s){return e.testCase.update({where:{id:t},data:{executionStatus:s.toLowerCase()}})}async function g(e){let t=process.env.DEFAULT_EXECUTION_STATUS||"";return e.testCase.updateMany({data:{executionStatus:t.toLowerCase()}})}let v=r.z.object({testSuiteId:r.z.string().optional().nullable(),tcId:r.z.string().min(1,"Test Case ID is required"),name:r.z.string().min(1,"Name is required"),status:r.z.string().min(1,"Status is required"),executionStatus:r.z.string().min(1,"Execution status is required"),meta:r.z.union([r.z.string(),r.z.record(r.z.any())]).optional().transform(e=>{if("string"==typeof e)try{return JSON.parse(e)}catch{return}return e})});var y=s(64297);let j=(0,n.A)(process.env.POSTGRES_URL,{ssl:"require"}),S=r.z.object({id:r.z.string(),customerId:r.z.string({invalid_type_error:"Please select a customer."}),amount:r.z.coerce.number().gt(0,{message:"Please enter an amount greater than $0."}),status:r.z.enum(["pending","paid"],{invalid_type_error:"Please select an invoice status."}),date:r.z.string()}),w=S.omit({id:!0,date:!0}),P=S.omit({date:!0,id:!0});async function N(e,t){let s=w.safeParse({customerId:t.get("customerId"),amount:t.get("amount"),status:t.get("status")});if(!s.success)return{errors:s.error.flatten().fieldErrors,message:"Missing Fields. Failed to Create Invoice."};let{customerId:a,amount:r,status:n}=s.data,c=new Date().toISOString().split("T")[0];try{await j`
            INSERT INTO invoices (customer_id, amount, status, date)
            VALUES (${a}, ${100*r}, ${n}, ${c})
        `}catch(e){return console.log(e),{message:"Database Error: Failed to Create Invoice."}}(0,i.revalidatePath)("/dashboard/invoices"),(0,o.redirect)("/dashboard/invoices")}async function E(e,t,s){let a=P.safeParse({customerId:s.get("customerId"),amount:s.get("amount"),status:s.get("status")});if(!a.success)return{errors:a.error.flatten().fieldErrors,message:"Missing Fields. Failed to Update Invoice."};let{customerId:r,amount:n,status:c}=a.data;try{await j`
            UPDATE invoices
            SET customer_id = ${r},
                amount      = ${100*n},
                status      = ${c}
            WHERE id = ${e}
        `}catch(e){return console.log(e),{message:"Database Error: Failed to Update Invoice."}}(0,i.revalidatePath)("/dashboard/invoices"),(0,o.redirect)("/dashboard/invoices")}async function I(e){await j`DELETE
              FROM invoices
              WHERE id = ${e}`,(0,i.revalidatePath)("/dashboard/invoices")}async function A(e,t){try{await f("credentials",t)}catch(e){if(e instanceof c.lR){if(e instanceof c.xz)return"Invalid credentials.";return"Something went wrong."}throw e}}async function _(e,t){let s=v.safeParse({testSuiteId:t.get("testSuiteId")?.toString()||null,tcId:t.get("tcId"),name:t.get("name"),status:t.get("status"),executionStatus:t.get("executionStatus"),meta:t.get("meta")});if(!s.success)return{errors:s.error.flatten().fieldErrors,message:"Validation failed. Please correct the fields."};let{testSuiteId:a,tcId:r,name:n,status:c,executionStatus:d,meta:l}=s.data;try{await x.testCase.create({data:{testSuiteId:a,tcId:r,name:n,status:c,executionStatus:d,meta:l}})}catch(e){return console.error("Prisma Error:",e),{message:"Database Error: Failed to create test case."}}(0,i.revalidatePath)("/dashboard/test-cases"),(0,o.redirect)("/dashboard/test-cases")}async function T(e,t,s){let a=v.safeParse({testSuiteId:s.get("testSuiteId")?.toString()||null,tcId:s.get("tcId"),name:s.get("name"),status:s.get("status")??"draft",executionStatus:s.get("executionStatus"),meta:s.get("meta")??{}});if(!a.success)return{errors:a.error.flatten().fieldErrors,message:"Validation failed. Please correct the fields."};let{testSuiteId:r,tcId:n,name:c,status:d,executionStatus:l,meta:u}=a.data;try{await x.testCase.update({where:{id:e},data:{testSuiteId:r,tcId:n,name:c,status:d,executionStatus:l,meta:u}})}catch(e){return console.error("Prisma Error:",e),{message:"Database Error: Failed to update test case."}}(0,i.revalidatePath)("/dashboard/test-cases"),(0,o.redirect)("/dashboard/test-cases")}async function z(e){await x.testCase.delete({where:{id:e}}),(0,i.revalidatePath)("/dashboard/testcases")}async function q(){await g(x),(0,i.revalidatePath)("/dashboard/testcases")}async function C(e,t){await h(x,e,t),(0,i.revalidatePath)(`/dashboard/testcases/${e}`)}(0,y.D)([N,E,I,A,_,T,z,q,C]),(0,a.A)(N,"604d28cc5fe65517e1e71479a95ca30d52f62647f2",null),(0,a.A)(E,"70cd218a13bbf7e047941d5eb672e1ea736c393821",null),(0,a.A)(I,"402f36ecbf5bed9ef78ecfe082ac1324468e4faca6",null),(0,a.A)(A,"603b892c1987802fad2b2db79b73c5807c01e5e018",null),(0,a.A)(_,"604b4464c12c6c394011553f4987ee0bf75a3d104b",null),(0,a.A)(T,"706b4c5462dd25e3adb21a37880d0b1b17191735e9",null),(0,a.A)(z,"40ef6fdc5ab71f4a62a4e2c79135ecedaec44ab323",null),(0,a.A)(q,"00c11f974ed7841b85bdc9c4c0cc0b006a619bae33",null),(0,a.A)(C,"60f26facb713b86329ba52f466559788eda0694dcb",null)}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[557,885,189,906,795,171,141,670,547,487],()=>s(76566));module.exports=a})();