(()=>{var e={};e.id=236,e.ids=[236],e.modules={8:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var a=s(37413),r=s(75986),n=s(4536),i=s.n(n),o=s(64964),d=s.n(o);function c({breadcrumbs:e}){return(0,a.jsx)("nav",{"aria-label":"Breadcrumb",className:"mb-6 block",children:(0,a.jsx)("ol",{className:(0,r.$)(d().className,"flex text-xl md:text-2xl"),children:e.map((t,s)=>(0,a.jsxs)("li",{"aria-current":t.active,className:(0,r.$)(t.active?"text-gray-900":"text-gray-500"),children:[(0,a.jsx)(i(),{href:t.href,children:t.label}),s<e.length-1?(0,a.jsx)("span",{className:"mx-3 inline-block",children:"/"}):null]},t.href))})})}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12463:(e,t,s)=>{Promise.resolve().then(s.bind(s,87182)),Promise.resolve().then(s.t.bind(s,4536,23))},16386:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>l,routeModule:()=>f,tree:()=>c});var a=s(65239),r=s(48088),n=s(88170),i=s.n(n),o=s(30893),d={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);s.d(t,d);let c={children:["",{children:["dashboard",{children:["test-cases",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,56434)),"/home/runner/work/testo-qa-workflow/testo-qa-workflow/app/dashboard/test-cases/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,20985)),"/home/runner/work/testo-qa-workflow/testo-qa-workflow/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,58014)),"/home/runner/work/testo-qa-workflow/testo-qa-workflow/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,l=["/home/runner/work/testo-qa-workflow/testo-qa-workflow/app/dashboard/test-cases/[id]/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},f=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/dashboard/test-cases/[id]/page",pathname:"/dashboard/test-cases/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},20711:(e,t,s)=>{Promise.resolve().then(s.bind(s,29610)),Promise.resolve().then(s.t.bind(s,85814,23))},21820:e=>{"use strict";e.exports=require("os")},22670:(e,t,s)=>{"use strict";s.r(t),s.d(t,{"0062df840bfce99431ea87299ab7876daa29f3e59a":()=>a.x});var a=s(30567)},27910:e=>{"use strict";e.exports=require("stream")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29610:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var a=s(60687),r=s(43210),n=s(6475);let i=(0,n.createServerReference)("60bb3ddee42f7a04f7a44b334c6dc6b4f371b358ee",n.callServer,void 0,n.findSourceMapURL,"updateExecutionStatus");var o=s(16189);function d({testCaseId:e,currentStatus:t,executionStatusOptions:s}){let[n,d]=(0,r.useState)(t),[c,l]=(0,r.useTransition)(),u=(0,o.useRouter)(),f=async t=>{t.preventDefault(),l(async()=>{await i(e,n),u.refresh()})};return(0,a.jsxs)("form",{onSubmit:f,className:"mt-4 space-x-2",children:[(0,a.jsx)("label",{htmlFor:"executionStatus",className:"text-sm font-medium",children:"Update Execution Status:"}),(0,a.jsxs)("select",{name:"executionStatus",id:"executionStatus",defaultValue:n,onChange:e=>d(e.target.value),className:"rounded-md border border-gray-300 p-2 text-sm shadow-sm focus:ring-2 focus:ring-blue-500 focus:outline-none",children:[(0,a.jsx)("option",{value:"",children:"All Statuses"}),s.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsx)("button",{type:"submit",disabled:c,className:"bg-blue-600 text-white text-sm px-3 py-1 rounded disabled:opacity-50",children:c?"Updating...":"Update"})]})}},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},55511:e=>{"use strict";e.exports=require("crypto")},56434:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m,generateMetadata:()=>f});var a=s(37413),r=s(39916),n=s(87182),i=s(73527);function o({testCase:e}){var t;let s=(t=e.meta)&&"object"==typeof t&&"testSteps"in t&&t.testSteps||[];return(0,a.jsx)("div",{className:"min-h-screen",children:(0,a.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(d,{value:(0,a.jsx)(c,{status:e.executionStatus})})}),s.length>0&&(0,a.jsxs)("div",{className:"mt-12",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:" Test Steps"}),(0,a.jsx)("div",{className:"space-y-5",children:s.map((e,t)=>(0,a.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-5 hover:bg-gray-100 transition",children:[(0,a.jsxs)("p",{className:"text-lg font-semibold text-gray-900 mb-1",children:["Step ",e.stepNumber,": ",e.name]}),e.testData&&(0,a.jsxs)("p",{className:"text-sm text-gray-700 mt-1",children:[(0,a.jsx)("span",{className:"font-medium",children:"Test Data:"})," ",(0,a.jsx)("code",{className:"bg-gray-200 px-2 py-0.5 rounded text-gray-800 text-sm",children:JSON.stringify(e.testData)})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-700 mt-1",children:[(0,a.jsx)("span",{className:"font-medium",children:"Expected Output:"})," ",e.expectedOutput]})]},t))})]}),(0,a.jsx)(n.default,{testCaseId:e.id,currentStatus:e.executionStatus,executionStatusOptions:(0,i.ky)()})]})})}function d({value:e}){return(0,a.jsxs)("div",{children:[" ",(0,a.jsx)("p",{className:"text-base font-medium text-gray-800",children:e})]})}function c({status:e}){let t={passed:"bg-green-200 text-green-700",failed:"bg-red-200 text-red-700",blocked:"bg-orange-200 text-yellow-700",skipped:"bg-gray-200 text-gray-700",default:"bg-blue-100 text-blue-700"},s=t[e]||t.default;return(0,a.jsx)("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${s}`,children:e})}var l=s(8),u=s(31920);async function f(e){let t=(await e.params).id,s=await (0,u.xN)(Number(t));return s?{title:`${s.name}`,description:"Details of the test case and related steps."}:{title:"Test Case Not Found",description:"This test case does not exist."}}async function m(e){let t=(await e.params).id,s=await (0,u.xN)(Number(t));return s?(0,a.jsxs)("main",{className:"p-10",children:[(0,a.jsx)(l.A,{breadcrumbs:[{label:"Test Cases",href:"/dashboard/test-cases"},{label:`(${s.tcId}) ${s.name}`,href:"/dashboard/test-cases/import",active:!0}]}),(0,a.jsx)(o,{testCase:s})]}):(0,r.notFound)()}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},72782:(e,t,s)=>{"use strict";s.r(t),s.d(t,{"006be5bee720b498c5755c012b343297d703a8f0e7":()=>T,"4002d4858d62bbf47c90b32e0173b99e89d7fecf85":()=>_,"40a3819d20f8206d7be99f3a58419fdd116e6930c9":()=>q,"601570dbd301ab9de298f03b0e765aada4304a3076":()=>N,"604b94fb5931c4d28ea521fc1440f6f4785cd2cbbc":()=>I,"60bb3ddee42f7a04f7a44b334c6dc6b4f371b358ee":()=>z,"60c0d155ef4cb1913ce6c7408480756dae40cb0989":()=>k,"7018bb790f26dd4ef27a1ef2bbe5178e8e9c616387":()=>A,"704b0942d5a4df832f6d47f85519ab202eef9ee039":()=>E});var a=s(91199);s(42087);var r=s(94291),n=s(36737),i=s(7944),o=s(90141),d=s(91170),c=s(27314),l=s(34872);async function u(e){let t="testo@teamtesto.com",s=process.env.TEAM_TESTO_ADMIN_PASSWORD,a=s&&""!==s.trim()?s:"teamtesto",r=await l.Ay.hash(a,10);if(e===t)return{id:"admin",name:"TeamTesto",email:t,password:r}}(0,n.A)(process.env.POSTGRES_URL,{ssl:"require"});let{auth:f,signIn:m,signOut:b}=(0,d.Ay)({pages:{signIn:"/login"},callbacks:{authorized({auth:e,request:{nextUrl:t}}){let s=!!e?.user,a=t.pathname,r=a.match(/\.(svg|png|jpg|jpeg|gif|css|js|ico|txt|woff2?|ttf|eot|otf)$/);if(a.startsWith("/_next")||a.startsWith("/favicon")||r)return!0;let n=a.startsWith("/dashboard"),i=a.startsWith("/seed");return n||i?!!s:!s||Response.redirect(new URL("/dashboard",t))}},providers:[],providers:[(0,c.A)({async authorize(e){let t=r.z.object({email:r.z.string().email(),password:r.z.string().min(6)}).safeParse(e);if(t.success){let{email:e,password:s}=t.data,a=await u(e);if(!a)return null;if(await l.Ay.compare(s,a.password))return a}return console.log("Invalid credentials"),null}})]});var p=s(96330);let x=global.prisma||new p.PrismaClient;async function h(e,t,s){return e.testCase.update({where:{id:t},data:{executionStatus:s.toLowerCase()}})}async function g(e){let t=process.env.DEFAULT_EXECUTION_STATUS||"";return e.testCase.updateMany({data:{executionStatus:t.toLowerCase()}})}let v=r.z.object({testSuiteId:r.z.string().optional().nullable(),tcId:r.z.string().min(1,"Test Case ID is required"),name:r.z.string().min(1,"Name is required"),status:r.z.string().min(1,"Status is required"),executionStatus:r.z.string().min(1,"Execution status is required"),meta:r.z.union([r.z.string(),r.z.record(r.z.any())]).optional().transform(e=>{if("string"==typeof e)try{return JSON.parse(e)}catch{return}return e})});var w=s(33331);let y=(0,n.A)(process.env.POSTGRES_URL,{ssl:"require"}),S=r.z.object({id:r.z.string(),customerId:r.z.string({invalid_type_error:"Please select a customer."}),amount:r.z.coerce.number().gt(0,{message:"Please enter an amount greater than $0."}),status:r.z.enum(["pending","paid"],{invalid_type_error:"Please select an invoice status."}),date:r.z.string()}),j=S.omit({id:!0,date:!0}),P=S.omit({date:!0,id:!0});async function N(e,t){let s=j.safeParse({customerId:t.get("customerId"),amount:t.get("amount"),status:t.get("status")});if(!s.success)return{errors:s.error.flatten().fieldErrors,message:"Missing Fields. Failed to Create Invoice."};let{customerId:a,amount:r,status:n}=s.data,d=new Date().toISOString().split("T")[0];try{await y`
            INSERT INTO invoices (customer_id, amount, status, date)
            VALUES (${a}, ${100*r}, ${n}, ${d})
        `}catch(e){return console.log(e),{message:"Database Error: Failed to Create Invoice."}}(0,i.revalidatePath)("/dashboard/invoices"),(0,o.redirect)("/dashboard/invoices")}async function E(e,t,s){let a=P.safeParse({customerId:s.get("customerId"),amount:s.get("amount"),status:s.get("status")});if(!a.success)return{errors:a.error.flatten().fieldErrors,message:"Missing Fields. Failed to Update Invoice."};let{customerId:r,amount:n,status:d}=a.data;try{await y`
            UPDATE invoices
            SET customer_id = ${r},
                amount      = ${100*n},
                status      = ${d}
            WHERE id = ${e}
        `}catch(e){return console.log(e),{message:"Database Error: Failed to Update Invoice."}}(0,i.revalidatePath)("/dashboard/invoices"),(0,o.redirect)("/dashboard/invoices")}async function q(e){await y`DELETE
              FROM invoices
              WHERE id = ${e}`,(0,i.revalidatePath)("/dashboard/invoices")}async function k(e,t){try{await m("credentials",t)}catch(e){if(e instanceof d.lR){if(e instanceof d.xz)return"Invalid credentials.";return"Something went wrong."}throw e}}async function I(e,t){let s=v.safeParse({testSuiteId:t.get("testSuiteId")?.toString()||null,tcId:t.get("tcId"),name:t.get("name"),status:t.get("status"),executionStatus:t.get("executionStatus"),meta:t.get("meta")});if(!s.success)return{errors:s.error.flatten().fieldErrors,message:"Validation failed. Please correct the fields."};let{testSuiteId:a,tcId:r,name:n,status:d,executionStatus:c,meta:l}=s.data;try{await x.testCase.create({data:{testSuiteId:a,tcId:r,name:n,status:d,executionStatus:c,meta:l}})}catch(e){return console.error("Prisma Error:",e),{message:"Database Error: Failed to create test case."}}(0,i.revalidatePath)("/dashboard/test-cases"),(0,o.redirect)("/dashboard/test-cases")}async function A(e,t,s){let a=v.safeParse({testSuiteId:s.get("testSuiteId")?.toString()||null,tcId:s.get("tcId"),name:s.get("name"),status:s.get("status")??"draft",executionStatus:s.get("executionStatus"),meta:s.get("meta")??{}});if(!a.success)return{errors:a.error.flatten().fieldErrors,message:"Validation failed. Please correct the fields."};let{testSuiteId:r,tcId:n,name:d,status:c,executionStatus:l,meta:u}=a.data;try{await x.testCase.update({where:{id:e},data:{testSuiteId:r,tcId:n,name:d,status:c,executionStatus:l,meta:u}})}catch(e){return console.error("Prisma Error:",e),{message:"Database Error: Failed to update test case."}}(0,i.revalidatePath)("/dashboard/test-cases"),(0,o.redirect)("/dashboard/test-cases")}async function _(e){await x.testCase.delete({where:{id:e}}),(0,i.revalidatePath)("/dashboard/testcases")}async function T(){await g(x),(0,i.revalidatePath)("/dashboard/testcases")}async function z(e,t){await h(x,e,t),(0,i.revalidatePath)(`/dashboard/testcases/${e}`)}(0,w.D)([N,E,q,k,I,A,_,T,z]),(0,a.A)(N,"601570dbd301ab9de298f03b0e765aada4304a3076",null),(0,a.A)(E,"704b0942d5a4df832f6d47f85519ab202eef9ee039",null),(0,a.A)(q,"40a3819d20f8206d7be99f3a58419fdd116e6930c9",null),(0,a.A)(k,"60c0d155ef4cb1913ce6c7408480756dae40cb0989",null),(0,a.A)(I,"604b94fb5931c4d28ea521fc1440f6f4785cd2cbbc",null),(0,a.A)(A,"7018bb790f26dd4ef27a1ef2bbe5178e8e9c616387",null),(0,a.A)(_,"4002d4858d62bbf47c90b32e0173b99e89d7fecf85",null),(0,a.A)(T,"006be5bee720b498c5755c012b343297d703a8f0e7",null),(0,a.A)(z,"60bb3ddee42f7a04f7a44b334c6dc6b4f371b358ee",null)},74998:e=>{"use strict";e.exports=require("perf_hooks")},87182:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/runner/work/testo-qa-workflow/testo-qa-workflow/app/ui/test-cases/execution-status-form.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/runner/work/testo-qa-workflow/testo-qa-workflow/app/ui/test-cases/execution-status-form.tsx","default")},91645:e=>{"use strict";e.exports=require("net")},96330:e=>{"use strict";e.exports=require("@prisma/client")}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[719,407,287,971,805,946,663,929,483,189],()=>s(16386));module.exports=a})();